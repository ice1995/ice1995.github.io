<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[mycat使用记录一 -- 安装与配置]]></title>
    <url>%2F2018%2F08%2F30%2Fmycat-1%2F</url>
    <content type="text"><![CDATA[背景条件&emsp;&emsp;现有app流量数据统计分析系统，因数据量过大使用单数据库性能有限，打算将现有数据库进行优化，计划使用mycat实现分布式，在本地搭建环境学习 环境&emsp;&emsp;VMware虚拟机下的Cetnos7 × 3台 mycat的安装 下载mycat，这里我选择的是1.6.5版本，也就是目前的release版本。 上传至linux系统，解压至/opt/mycat(我习惯的目录) mycat的配置配置文件路径\$mycat_home\$指的是安装目录\$mycat_home\$/conf/server.xml Mycat的配置文件，设置账号、参数等\$mycat_home\$/conf/schema.xml Mycat对应的物理数据库和数据库表的配置\$mycat_home\$/conf/rule.xml Mycat分片（分库分表）规则 具体配置 wrapper.conf–配置jdk(如果已经配置java环境变量，这一步可以忽略) 12wrapper.java.command=/usr/bin/java #配置java的路径 server.xml user标签 12345&lt;user name="root" defaultAccount="true"&gt; &lt;property name="password"&gt;your_password&lt;/property&gt; &lt;property name="schemas"&gt;db1,db2&lt;/property&gt; &lt;property name="readOnly"&gt;false&lt;/property&gt; &lt;/user&gt; user 用户配置节点–name 登录的用户名，也就是连接Mycat的用户名–password 登录的密码，也就是连接Mycat的密码–schemas 数据库名，这里会和schema.xml中的配置关联，多个用逗号分开，例如需要这个用户需要管理两个数据库db1,db2，则配置db1,dbs privileges标签 123456789 &lt;privileges check="false"&gt; 默认关闭 &lt;schema name="TESTDB" dml="0110" &gt; &lt;table name="tb01" dml="0000"&gt;&lt;/table&gt; &lt;table name="tb02" dml="1111"&gt;&lt;/table&gt; 1 代表有权限 0 代表无权限 顺序为 insert,update,select,delete &lt;/schema&gt;&lt;/privileges&gt; system标签这个标签内嵌套的所有 property 标签都与系统配置有关。 firewall标签有关防火墙的标签，也就是在网络层对请求的地址进行限制，主要是从安全角度来保证Mycat不被匿名IP进行访问 123456789101112131415161718192021222324252627282930313233 &lt;!-- 全局SQL防火墙设置 --&gt; &lt;!--白名单可以使用通配符%或着*--&gt; &lt;!--例如&lt;host host="127.0.0.*" user="root"/&gt;--&gt; &lt;!--例如&lt;host host="127.0.*" user="root"/&gt;--&gt; &lt;!--例如&lt;host host="127.*" user="root"/&gt;--&gt; &lt;!--例如&lt;host host="1*7.*" user="root"/&gt;--&gt; &lt;!--这些配置情况下对于127.0.0.1都能以root账户登录--&gt; &lt;!-- &lt;firewall&gt; &lt;whitehost&gt; &lt;host host="1*7.0.0.*" user="root"/&gt; &lt;/whitehost&gt; &lt;blacklist check="false"&gt; &lt;/blacklist&gt; &lt;/firewall&gt; ``` 3. schema.xml -- schema 数据库设置，此数据库为逻辑数据库，name与server.xml中schema对应 -- dataNode 分片信息，也就是分库相关配置 -- dataHost 物理数据库，真正存储数据的数据库 1. schema标签 &amp;emsp;&amp;emsp;schema标签用来定义mycat实例中的逻辑库，mycat可以有多个逻辑库，每个逻辑库都有自己的相关配置。可以使用schema标签来划分这些不同的逻辑库 &amp;emsp;&amp;emsp;如果不配置schema标签，所有表的配置会属于同一个默认的逻辑库。逻辑库的概念和MySql的database的概念一样，我们在查询两个不同逻辑库中的表的时候，需要切换到该逻辑库下进行查询。 ```xml &lt;schema name="test_bohan" checkSQLschema="false" sqlMaxLimit="100"&gt; &lt;/schema&gt; &lt;!-- name 逻辑数据库名,与server.xml中的schema对应 checkSQLschema 数据库前缀相关设置，当该值为true时，例如我们执行语句select * from TESTDB.company 。mycat会把语句修改为 select * from company 去掉TESTDB。 sqlMaxLimit 当该值设置为某个数值时，每条执行的sql语句，如果没有加上limit语句，Mycat会自动加上对应的值。不写的话，默认返回所有的值。 --&gt; table标签 12345678910111213141516171819202122 &lt;table name=“test” primaryKey="ID" autoIncrement="true" dataNode=“dn1,dn2,dn3” /&gt; &lt;table name=“mine” primaryKey="ID" autoIncrement="true" dataNode=“dn1,dn2,dn3” /&gt; &lt;table name=“new” primaryKey="ID" autoIncrement="true" dataNode=“dn1,dn2,dn3” /&gt; ``` --name 表名，物理数据库中表名 --dataNode 表存储到哪些节点，多个节点用逗号分隔。节点为下文dataNode设置的name --primaryKey 主键字段名，自动生成主键时需要设置 --autoIncrement 是否自增 --rule 分片规则名，具体规则下文rule详细介绍 --type 该属性定义了逻辑表的类型，目前逻辑表只有全局表和普通表。全局表： global 普通表：无 注：全局表查询任意节点，普通表查询所有节点效率低 --autoIncrement mysql对非自增长主键，使用last_insert_id() 是不会返回结果的，只会返回0.所以，只有定义了自增长主键的表，才可以用last_insert_id()返回主键值。 mycat提供了自增长主键功能，但是对应的mysql节点上数据表，没有auto_increment,那么在mycat层调用last_insert_id()也是不会返回结果的。 --needAddLimit 指定表是否需要自动的在每个语句后面加上limit限制，由于使用了分库分表，数据量有时候会特别庞大，这时候执行查询语句，忘记加上limt就会等好久，所以mycat自动为我们加上了limit 100，这个属性默认为true，可以自己设置为false禁用。如果使用这个功能，最好配合使用数据库模式的全局序列。 --subTables 分表，分表目前不支持Join。 - childTable标签 ```xml &lt;table name="customer" primaryKey="ID" dataNode="dn1,dn2" rule="sharding-by-intfile"&gt; &lt;childTable name="c_a" primaryKey="ID" joinKey="customer_id" parentKey="id" /&gt; &lt;/table&gt; –childTable 标签用于定义 E-R 分片的子表。通过标签上的属性与父表进行关联。 –name 子表的名称 –joinKey 子表中字段的名称 –parentKey 父表中字段名称 –primaryKey 同Table –needAddLimit 同Table https://www.cnblogs.com/fxwl/p/7990906.html]]></content>
      <categories>
        <category>middleware</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mycat</tag>
        <tag>db</tag>
        <tag>middleware</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux指令记录合集（长期更新）]]></title>
    <url>%2F2018%2F08%2F30%2Flinux-command%2F</url>
    <content type="text"><![CDATA[此命令合集适合于Centos 7 systemctl服务相关指令1234567systemctl start service-name #启动某服务systemctl stop service-name #停止某服务systemctl restart service-name #重启某服务systemctl enable service-name #设置开机自动启动某服务systemctl disable service-name #设置开机停止自动启动某服务systemctl list-units --type=service #查看所有已启动的服务systemctl list-unit-files #查看已经安装的所有服务 添加程序到服务systemctl脚本存放在:/usr/lib/systemd/ [Unit]部分主要是对这个服务的说明，内容包括Description和After，Description 用于描述服务，After用于描述服务类别 [Service]部分是服务的关键，是服务的一些具体运行参数的设置. Type=forking是后台运行的形式， User=users是设置服务运行的用户, Group=users是设置服务运行的用户组, PIDFile为存放PID的文件路径， ExecStart为服务的具体运行命令, ExecReload为重启命令， ExecStop为停止命令， PrivateTmp=True表示给服务分配独立的临时空间 注意：[Service]部分的启动、重启、停止命令全部要求使用绝对路径，使用相对路径则会报错！ [Install]部分是服务安装的相关设置，可设置为多用户的 12345678910111213141516171819#以tomcat为例#vim /usr/lib/systemd/system/tomcat.service [Unit]Description=java tomcat projectAfter=tomcat.service [Service]Type=forkingUser=usersGroup=usersPIDFile=/usr/local/tomcat/tomcat.pidExecStart=/usr/local/tomcat/bin/startup.shExecReload=ExecStop=/usr/local/tomcat/bin/shutdown.shPrivateTmp=true [Install]WantedBy=multi-user.target firewall-cmd防火墙相关12firewall-cmd --add-port=port-number/protocols --zone=zone-name --permanent #在zone-name区域永久开启protocol协议的port-number端口firewall-cmd --zone=public --list-all # 显示所有公共区域（public）]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>command</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018年运动记录]]></title>
    <url>%2F2018%2F08%2F29%2Fsport-record%2F</url>
    <content type="text"><![CDATA[一周至少运动2-3次，加油2018年08月26日 慢跑 3公里2018年08月29日 慢跑 2.7公里]]></content>
      <categories>
        <category>mine</category>
      </categories>
      <tags>
        <tag>mine</tag>
        <tag>sport</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[lombok使用方法记录]]></title>
    <url>%2F2018%2F08%2F28%2Flombok%2F</url>
    <content type="text"><![CDATA[maven引入jar包12345&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.16.20&lt;/version&gt;&lt;/dependency&gt; 给IDE安装插件&emsp;&emsp;由于 Lombok 采取的注解形式的，在编译后，自动生成相应的方法，为了不让 IDE’疯了’，需要下载插件了支持它.&emsp;&emsp;以 idea 为例：查找插件 lombok plugin 安装即可。 一般注解 注解代码 用法 @Getter get方法 @Setter set方法 @ToString ToString方法 @EqualsAndHashCode equals方法和hashcode方法 @AllArgsConstructor 会生成一个包含所有变量，同时如果变量使用了NotNull annotation ， 会进行是否为空的校验，全部参数的构造函数的自动生成，该注解的作用域也是只有在实体类上，参数的顺序与属性定义的顺序一致。 @NoArgsConstructor 无参构造函数 @RequiredArgsConstructor 会生成一个包含常量（final），和标识了@NotNull的变量 的构造方法 @NonNull 非空检查,可以帮助我们避免空指针 构造器 使用staticName启用静态工厂模式，如下所示：@RequiredArgsConstructor(staticName=”of”)。与普通构造函数不同，这种静态工厂方法将推断泛型。这意味着您的API用户可以写入MapEntry.of(“foo”, 5)而不是使用new MapEntry&lt;String, Integer&gt;(“foo”, 5)。 在构造方法上添加注解。使用方法 12@RequiredArgsConstructor(onConstructor=@__(&#123;@AnnotationsGoHere&#125;))&#125;@RequiredArgsConstructor(onConstructor=@__(&#123;@Autowired&#125;))&#125; //例子 使用access标识构造器访问权限修饰符，默认为lombok.AccessLevel.PUBLIC。如： 1@AllArgsConstructor(access = lombok.AccessLevel.PROTECTED) @NoArgsConstructor(force = true)会初始化所有字段为0或者false或者null，初始化所有的参数为默认值 @val @var自动类型推断，简单来说，就是弱类型val注解变量申明是final类型 var注解变量是非final类型 @Data&emsp;&emsp;自动为所有字段添加@ToString, @EqualsAndHashCode, @Getter方法，为非final字段添加@Setter,和@RequiredArgsConstructor&emsp;&emsp;注意的是，同时使用@Data 和 @AllArgsConstructor后 ，默认的无参构造函数失效，如果需要它，要重新设置 @NoArgsConstructor @Accessors(chain = true)开启链式风格123456789101112@Accessors(chain = true)@Setter@Getterpublic class Student &#123; private String name; private int age;&#125;Student student = new Student() .setAge(24) .setName("zs"); @Slf4j直接调用log1log.info(xxxx); @Log使用的是 java.util.logging.Logger ，直接使用 变量 log。 @Builder使用建筑者模式构建对象。 @Cleanup自动化关闭流，相当于 jdk1.7 种的 try with resource1234@Cleanup InputStream in = new FileInputStream(args[0]);@Cleanup OutputStream out = new FileOutputStream(args[1]); @SneakyThrows当我们需要抛出异常，在当前方法上调用，不用显示的在方法名后面写 throw1@SneakyThrows(Exception.class) @Synchronized方法中所有的代码都加入到一个代码块中，默认静态方法使用的是全局锁，普通方法使用的是对象锁，当然也可以指定锁的对象。12345private final Object lock = new Object();@Synchronized("lock")public void foo() &#123; // Do something&#125; 参考内容：&emsp;&emsp;官方文档&emsp;&emsp;你真的会写java吗?&emsp;&emsp;使用Lombok来优雅的编码]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>java</tag>
        <tag>reconsitution</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[正则表达式应用（持续更新）]]></title>
    <url>%2F2018%2F08%2F28%2Fregex-using%2F</url>
    <content type="text"><![CDATA[编程过程中使用的正则记录 b[^:b#/]+.$ 统计代码行数（不包括以# / 开头的 亦不包括空行）]]></content>
      <categories>
        <category>regular</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>regular</tag>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记七 -- IPv6]]></title>
    <url>%2F2018%2F08%2F28%2Fccna-7%2F</url>
    <content type="text"><![CDATA[DoD模型应用层 Telent、FTP、SMTP、DNS、HTTP以及其他应用协议传输层 TCP、UDP网络层 ND、MLD、ICMPv6、IPv6网络接口 各种通信网络接口（以太网等物理网络） IPv6地址（128位） 首选的格式128比特分成8段，每段的16比特用16进制表示，中间用:隔开xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx 压缩格式，允许0压缩xxxx:xxxx::xx:xxx:x:xxxx一对::在一个地址中只能出现1次 IPv4构造IPv60:0:0:0:0:0:192.168.0.1或者::192.168.0.1 子网掩码xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/n 前n位是网络部分，后边是主机部分单播地址全球路由前缀 |子网|接口ID2001:0db8:3c4d:0012:a:d:1234:56ab链路本地地址 link local address 该地址用于同一网段中IPv6计算机通信多播地址任播地址 :: 相当于0.0.0.0::1 相当于127.0.0.12000::/3 全球单播地址范围，前三位是001FE80::/10 链路本地单播地址FF00::/8 组播地址范围3FFF:FFFF::/32 示例和文档保留地址2001:oDB8::/32 示例和文档保留地址2002::/16 用于IPv6到IPv4的转换系统 IPv6地址分配 静态 自动无状态 向路由器发送路由前缀请求，配置IPv6的路由器接口收到，然后发送路由通告，计算机获得网络部分+自己的MAC地址，进行构造IPv6地址有DHCP服务器 路由通告中M=1，则向DHCP服务器请求ip地址；路由通告中O=1，则向DHCP服务器请求其他设置如DNS服务器、搜索后缀等 123456(config)#ipv6 unicast-routing 启用IPv6(config)#interface fastEthernet 0/0(config-if)#ipv6 address 2001:13::1/64(config-if)#ipv6 nd managed-config-flag 令路由通告中M=1(config-if)#ipv6 nd other-config-flag 令路由通告中O=1 IPv6路由添加静态路由12345#show ipv6 interface fastEthernet 0/0 #show ipv6 route 查看IPv6路由表查(config)#ipv6 route 2001:1::/64 2001:1::1(config-if)#ipv6 address 2001:1::/64 eui-64 自己根据前缀和自己的MAC地址构造IPv6地址(config-if)#ipv6 address 2001:1::1/64 动态路由 RIPng协议 12345(config)#ipv6 unicast-routing(config)#ipv6 router rip 1(config-rtr)#exit(config)#interface fastEthernet 0/1(config-if)#ipv6 rip 1 enable EIGRPv6协议 1234567(config)#ipv6 unicast-routing(config)#ipv6 router eigrp 10(config-rtr)#no shutdown(config-rtr)#router-id 4.0.0.1(config-rtr)#exit(config)#interface fastEthernet 0/1(config-if)#ipv6 eigrp 10 OSPFv3协议 123456(config)#ipv6 unicast-routing(config)#ipv6 router ospf 1(config-rtr)#router-id 4.0.0.1(config-rtr)#exit(config)#interface fastEthernet 0/1(config-if)#ipv6 ospf 1 area 0 IPv4和IPv6共存技术双协议栈 IPv6 to IPv4隧道技术 1234567891011(config)#ipv6 unicast-routing(config)#interface fastEthernet 0/1(config-if)#ipv6 address 2001:1::1/64 (config-if)#exit(config)#interface tunnel 0 隧道虚拟端口(config-if)#no shutdown(config-if)#ipv6 address 2001:2::1/64 给隧道虚拟端口配置IPv6(config-if)#tunnel source 10.0.0.1 隧道源地址(config-if)#tunnel destination 10.0.1.2 隧道目标地址(config-if)#tunnel mode ipv6ip 设置隧道加密模式(config-if)#exit ISATAP隧道 配置ISATAP路由(该路由与IPv4网络接口为192.168.0.2) 123456(config)#interface tunnel 0(config-if)#ipv6 address 2001:1::/64 eui-64(config-if)#no ipv6 nd suppress-ra(config-if)#tunnel source 10.0.0.1(config-if)#tunnel mode ipv6ip isatap(config-if)#no shutdown windows下 12345&gt;netshnetsh&gt;interfacenetsh interface&gt;ipv6netsh interface ipv6&gt;isatapnetsh interface ipv6 isatap&gt;set router 192.168.0.2 静态NAT-PT 123456789(config)#interface fastEthernet 0/1(config-if)#ipv6 nat (config-if)#exit(config)#interface serial 1/0(config-if)#ipv6 nat (config-if)#exit(config)#ipv6 nat v6v4 source 10.0.0.2 2001:2::2 (config)#ipv6 nat v6v4 source 2001:2::4 10.0.0.4(config)#ipv6 prefix 2001:3::/96 动态NAT-PT 只能由IPv6网络主动向IPv4网络发起通信 12345678910111213141516(config)#interface fastEthernet 0/1(config-if)#ipv6 nat (config-if)#exit(config)#interface serial 1/0(config-if)#ipv6 nat (config-if)#exit(config)#ipv6 access-list v4map (config-ipv6-acl)#permit 2001:2::/64 any (config-ipv6-acl)#exit(config)#ipv6 access-list v6map(config-ipv6-acl)#permit 2001:2::/64 any (config-ipv6-acl)#exit(config)#ipv6 nat(config)#ipv6 nat v6v4 pool v4pool 10.0.2.100 10.0.2.200 prefix-length 24 (config)#ipv6 nat v6v4 source list v6list pool v4pool (config)#ipv6 nat prefix 2001::/96 v4-mapped v4map 2001::/96用v4map里的地址替代]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记六 -- NAT]]></title>
    <url>%2F2018%2F08%2F28%2Fccna-6%2F</url>
    <content type="text"><![CDATA[地址转换技术 内网能够主动访问外网，外网不能主动访问内网，相对而言内网更安全一些 节省公网ip地址 缺点 慢 NAT（网络地址转换）静态NAT 动态NAT 不节省公网地址、一个公网替换一个内网地址PAT（端口地址转换） 节省公网ip、替换源端口和源地址 1#debug ip packet 开启数据包转发显示 路由器上配置PAT12345678(config)#access-list 10 permit 10.0.0.0 0.0.0.255 定义内网地址池(config)#ip nat pool name 131.107.0.1 131.107.0.1 netmask 255.255.255.0定义一个名为name的公网地址池从.0.1到.0.1(config)#ip nat inside source list 10 pool name overload 10列表绑定到name，overload表示PAT，不加overload表示NAT(config)#interface serial 0/0(config-if)#ip nat outside 0/0公网出口(config-if)#exit(config)#interface serial 0/1(config-if)#ip nat inside 0/1内网入口 端口映射 使公网地址可以访问内网地址路由端口映射1(config)#ip nat inside source static tcp 10.0.0.6 80 137.107.0.1 80 端口映射]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记五 -- ACL]]></title>
    <url>%2F2018%2F08%2F28%2Fccna-5%2F</url>
    <content type="text"><![CDATA[网络安全物理层安全 墙上不用的网线接口，连接交换机的端口关掉数据链路层安全 ADSL拨号账号和密码 MAC地址绑定 交换机连接计算机数量控制 创建VLAN网络层安全 基于源ip地址目标IP地址的控制传输层安全 会话攻击 LAND攻击 syn洪水攻击应用层安全 登录密码 网络层安全标准的ACL 基于源地址进行控制1234567891011#config terminal (config)#access-list 10 deny host 192.168.1.2(config)#access-list 10 permit 192.168.1.0 0.0.0.255 允许192.168.1.0访问，使用翻转子网掩码(config)(config)#interface serial 3/0(config-if)#ip access-group 10 in/out 绑定控制列表到物理接口并确定出还是进检查访问列表(config)#no access-list 10 删除ACL10ACL的顺序影响访问控制扩展的ACL 基于源地址、目标地址、协议、端口号进行控制(config)#access-list 100 permit ip 192.168.1.0 0.0.0.255 any 允许192.168.1.0/24访问任何(config)#access-list 100 permit tcp 192.18.2.0 0.0.0.255 10.0.0.0 0.0.0.255 eq 80 允许192.18.2.0/24访问10.0.0.0/8上的web服务器(config)#access-list 100 permit icmp 192.18.2.0 0.0.0.255 any 允许192.18.2.0/24ping任何因特网 将acl绑定到telnet接口1(config-line)#access-class 10 in/out acl具体应用 入站————决不允许任何源地址是内部主机地址或网络地址的数据包进入一个私有的网络 12345678#access-list 150 deny ip 127.0.0.0 0.255.255.255 any log#access-list 150 deny ip 0.0.0.0 255.255.255.255 any log#access-list 150 deny ip 10.0.0.0 0.255.255.255 any log#access-list 150 deny ip 127.16.0.0 0.15.255.255 any log#access-list 150 deny ip 192.168.0.0 0.0.255.255 any log#access-list 150 deny ip 224.0.0.0 15.255.255.255 any log#access-list 150 deny ip host 255.255.255.255 any log#access-list 150 permit ip any any 出站————决不允许任何含有非内部网络有效的ip数据包出站 12#access-list 150 permit 192.168.0.0 0.0.255.255 any#access-list 150 deny ip any any log 阻塞外部访问 12#access-list 109 permit any 192.268.0.0 0.0.255.255 established #access-list 109 deny ip any any log 过滤ICMP消息————禁止ping命令进内网 #access-list 112 deny icmp any any echo log #access-list 112 deny icmp any any redirect log #access-list 112 deny icmp any any mask-request log #access-list 112 permit icmp any 192.168.0.0 0.0.255.255]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记四 -- VLAN]]></title>
    <url>%2F2018%2F08%2F28%2Fccna-4%2F</url>
    <content type="text"><![CDATA[VLAN虚拟局域网&emsp;&emsp;VLAN是交换机组网才有的概念，按部门或管理的要求来组网，而不是按照位置组网，更灵活，安全一个VLAN=一个广播域=一个网段12345#show vlan 查看VLAN(config)#vlan 2 创建VLAN2(config)#interrface range fastEthernet 0/13 - 24 选中13-24接口(config-if-range)#switchport mode access 设置计算机接口(config-if-range)#switchport access vlan 2 设置为vlan2 单臂路由器实现VLAN间路由12(config)#interface gigabitEthernet 1/1 打开Gbit1/1接口(config-if)#switchport mode trunk 设置干道链路 三层交换机上的配置123456789(config)#ip routing 启用路由功能(config-if)#switchport trunk encapsulation dotlq设置trunk封装格式为dotlq(config-if)#switchport mode trunk(config)#Interface vlan 1(config-if)#ip address ip_address mask (config-if)# no shutdown (config)#interface vlan 2(config-if)#ip address ip_address mask (config-if)# no shutdown VTP协议123(condig)#vtp domain name 设置vtp域名(condig)#vtp password passwd 设置vtp密码(condig)#vtp mode client/server 设置客户端或者服务端，服务端可以更改整个域的VLAN的添加删除，但是不能更改其他的交换机的端口是否属于该vlan]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记三 -- 路由和交换]]></title>
    <url>%2F2018%2F08%2F28%2Fccna-3%2F</url>
    <content type="text"><![CDATA[网络畅通的条件数据包能去能回沿途的路由器必须知道到目标地址如何转发沿途的路由器必须知道回来的数据包如何转发 路由器直连的网络 不用告诉路由器如何转发路由器没有直连的网络 管理员需要告诉路由器到目标网络如何转发 即添加静态路由123456(config)#ip route 192.168.1.0 255.255.255.0 192.268.2.0 设置数据包 到192.168.1.0/24的数据包下一跳给192.168.2.0(config)#tracroute ip_address 跟踪数据包路径#show ip route 查看路由表(config)#no ip route 192.168.1.0 255.255.255.0 删除路由表windows上添加路由表 route add ip_adress mask ip_webwindows查看路由表 netstat-r route print 动态路由优先级 直连0 静态路由1 eigp90 rip120RIP协议 跳数判断，周期性（30s）更新路由表，最大跳数16跳12345678(config)#router rip 启用rip协议 (config-router)#network 192.168.1.0 该网段参与rip协议 #debug ip rip 显示rip协议信息#undebug all 关闭rip协议信息显示#show ip protocols 显示应用协议EIGP协议 优先级高于RIP(config)#router eigp 10 启用eigp协议,相同编号路由器才可以交换路由信息(config-router)#network 192.168.1.0 该网段参与eigp协议 交换集线器 不安全、冲突域、带宽共享交换机 基于目标MAC地址转发、学习MAC地址、端口独享带宽、没有冲突、广播会出问题123456789#show mac-address-table 显示MAC地址表 #config terminal (config)#interrface fastEthernet 0/4 (config-if)#switchport mode access 接机算机的接口 (config-if)#switchport port-security 启用安全 (config-if)#switchport port-security violation shutdown 违反安全规则down掉 (config-if)#switchport port-security maxium 2 限制连接数量 (config)#interrface range fastEthernet 0/1 - 24 选中1-24个口 (config-if-range)#switchport port-security mac-adddress sticky MAC地址终止学习 生成树协议 为了高可用局域网交换机连接有了环路为了阻断网络中的广播有了生成树协议123#show spanning-tree 查看交换机端口以及生成树状态(config)#spanning-tree vlan 1 priority 4096更改路由器优先级为4096，值越小优先级越高(config)#no spanning-tree vlan 1 关闭生成树协议]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记二 -- TCP/IP协议]]></title>
    <url>%2F2018%2F08%2F27%2Fccna-2%2F</url>
    <content type="text"><![CDATA[DoD模型应用层 Telent、FTP、SMTP、DNS、HTTP以及其他应用协议传输层 TCP、UDP网络层 IPv4、ARP、RARP、ICMP网络接口 各种通信网络接口（以太网等物理网络） 传输层协议可靠传输 TCP 分段传输 建立会话（消耗系统资源） 丢失重传不可靠传输 UDP 一个数据包就能表达完整 屏幕广播 应用层协议默认端口http=TCP+80ftp=TCP+21（接受命令、验证身份等） 20（传输数据）https=TCP+443SMTP=TCP+25（发邮件）POP3=TCP+110（收邮件）RDP=TCP+3389(远程桌面)DNS=UDP+53（DNS解析）IP地址访问Windows共享文件夹=TCP+445计算机名访问windows共享文件夹=TCP+139SQL=TCP+1433（访问数据库）telnet=TCP+23 服务和端口的关系服务侦听端口客户端请求服务 使用目标端口来区分（服务器根据数据包的目标端口来区分客户端）服务停止 侦听的端口关闭查看侦听的端口 netstat -anb|find “content”检测端口 telnet ip 端口 网络安全win2003service tcp/ip筛选不影响出去的流量wf.msc windows高级防火墙 网络层协议IP协议 选择最佳路径的协议（RIP OSPF EIGRP BGP）ICMP协议 测试网络是否畅通ping 估计带宽 查看网络是否畅通 断定远程系统 每过一个路由器TTL-1TTL 128 windows系统TTL 64 linux系统pathping 跟踪路径 计算丢包情况IGMP协议 组播点到点 广播 多播（组播）ARP协议 将计算机的IP地址解析成MAC地址数据跨网段通讯和同一网段通信过程MAC地址决定了下一跳给那个设备IP地址决定最终计算机 IP地址32位二进制组成 ip地址分类 x:network id y:host id 类别 功能 开头 个头 缺省子网掩码 A xyyy 1-127 256^3-2 255.0.0.0 B xxyy 128-191 256^2-2 255.255.0.0 C xxxy 192-223 256-2 255.255.255.0 D 组播 224-239 E 研究 240-255 保留的私网地址A 10.0.0.0B 172.16.0.0-172.31.0.0C 192.168.0.0-192.168.255.0 本地环回地址127.0.0.1 ping通过表示TCP/IP协议安装正常169.254.0.0 DHCP获取网络地址未果的时候得到的地址]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCNA学习笔记一 -- 计算机网络详解]]></title>
    <url>%2F2018%2F08%2F27%2Fccna-1%2F</url>
    <content type="text"><![CDATA[局域网与广域网 局域网 自己花钱买设备自己搭配服务器，带宽固定 广域网 花钱租带宽 OSI参考模型↑7 应用层 能产生网络流量的应用程序 ↑6 表示层 表示数据，处理数据 加密 压缩 等 ↑5 会话层 msconfig netstat -nb (显示程序) ↑4 传输层 可靠传输 建立会话 流量控制 差错检查 不可靠传输 不建立会话 节省服务器资源 ↑3 网络层 选择最佳路径 ↑2 数据链路层 网络设备 如何封装数据帧 设备地址 ↑1 物理层 规定了电压标准、接口标准 程序员的工作层 应用层、表示层、会话层网络工程师的工作层 传输层、网络层、数据链路层、物理层网络分层的好处：每一层互不干扰，没有影响；有主于设备标准化 网络排错和OSI参考模型 网络层 可能出现的错误 物理层 连接问题 数据链路层 MAC地址冲突 ADSL拨号密码错误 网络层 计算机网关设置错误、路由器路由表错误 应用层 IE代理设置错误 网络安全和OSI参考模型 网络层 安全问题 物理层安全 数据链路层安全 MAC地址认证 ADSL拨号上网账号密码 划分VLAN 网络层安全 路由器ACL 传输层安全 计算机端口安全 应用层安全 网站安全、操作系统安全 网络设备 网线双绞线 4对 8根 100米 10M 100M（实际用了4根） 1000M （实际用了8根）线序 直通线（都按B连） 同类设备用交叉线（一个A 一个B）不同类设备用直通线水晶头接法 RJ45 A 绿白 绿 橙白 蓝 蓝白 橙 棕白 棕 RJ45 B 橙白 橙 绿白 蓝 蓝白 绿 棕白 棕 网卡 MAC地址（物理地址）不能更改MAC地址由48位二进制组成，前24位代表厂家 后边为厂家自己所设置的序号查看MAC地址的指令（dos下） ipconfig /all 集线器 HUB 不安全 带宽共享 效率低下 半双工 网桥 隔绝冲突域 交换机 基于MAC地址转发数据、带宽独享、全双工、安全、学习MAC地址 路由器 负责在不同网段转发数据 一般有广域网接口 隔绝广播（MAC地址全1） 网络设备和OSI参考模型集线器 物理层设备交换机 基于MAC地址转发 数据链路层设备路由器 基于IP地址转发 三层设备 分层考虑问题网络排错方法 替换法]]></content>
      <categories>
        <category>net</category>
      </categories>
      <tags>
        <tag>ccna</tag>
        <tag>net</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Regular Expression 正则表达式]]></title>
    <url>%2F2018%2F08%2F25%2Fregex%2F</url>
    <content type="text"><![CDATA[Regular Expression（正则表达式） 简称Regex在Javascript中 g(global)表示全局 i表示不区分大小写 .可以匹配任何一个单位的字符 []用于定义字符集合 ^取非 元字符 元字符 解释说明 [\b] Backspace键（退格) \n 换行符 \f 换页符 \r 回车符 \t 制表符（tab） \v 垂直制表符 \r\n 回车+换行 许多操作系统以此为行结束，Unix与Linux以\n作为行结束 \d 任何一个数字字符 [0-9] \D 任何一个非数字字符 [^0-9] \w [a-zA-Z0-9_] \W [^a-zA-Z0-9_] \s [\f\n\r\t\v] 任一一个空白字符 \S [^\f\n\r\t\v] 任一一个非空白字符 \xXX XX:表示十六进制数 \0XX XX:表示八进制数 POSIX字符类 javascript不支持 POSIX字符类 解释说明 [:alnum:] [\w^_] [:upper:] [A-Z] [:alpha:] [a-zA-Z] [:blank:] [ \t] 注意：这里包含空格 [:xdigit:] 任何一个十六进制数 [a-fA-F0-9] [:cntrl:] ASCII控制字符 0-31加上127 [:digit:] \d [:graph:] [:print:]去除空格 [:lower:] [a-z] [:print:] 任何一个可打印字符 [:punct:] 既不属于[:alnum:]也不属于[:cntrl:]的字符 [:space:] [\f\r\n\t\v ] 注意：这里包含空格 符号 解释说明 + 一次或多次重复 +? 懒惰型 * 零次或多次重复 *? 懒惰型 ? 零次或一次出现 {n} 重复n次 {m,n} 至少m次，至多n次 {m,} 至少出现m次 {m,}? 懒惰型 \b 一个单词的开头或结尾 b：boundary \B 不匹配一个单词边界 ^ 字符串开头 $ 字符串结尾 (?m) 置于开头，用于开启分行匹配模式 multline mode 注意：有的语言不支持 (xx) 子表达式，视为独立元素 回溯引用 backreference替换模式下Javascript使用$代替\ 符号 解释说明 \1,\2……\n 第1个表达式，第2个表达式…….第n个表达式 \0 代表整个正则表达式 \E 结束 \L或\U转换 \l 把下一个字符转换为小写 \L 把\L到\E之间全部转换为小写 \u 把下一个字符转换为大写 \U 把\U到\E之间全部转换为大写 注意：1、 Java、Perl、PHP、.NET 支持向后查找2、 Javascript、ColdFusion 不支持向后查找向前查找：(?=x) 匹配但不消费x，即结果不包括x 例 (?=:) 原字符串 https: 匹配结果 http向后查找：(?&lt;=x) 匹配但不消费x，即结果不包括x 例 (?&lt;=\$) 原字符串 $400 匹配结果 400注意：向前查找可以任意长度（可以使用.+） 向后查找的长度是固定的 (?=) 正向前查找 (?&lt;=) 正向后查找 (?!) 负向前查找 (?&lt;!) 负向后查找 Mysql JAVA1.4不支持条件处理(?(backreference)true-regex)(?(backreference)true-regex|false-regex)Backreference满足时，匹配true-regex 否则匹配false-regex]]></content>
      <categories>
        <category>regular</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>regular</tag>
        <tag>regex</tag>
        <tag>code</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git命令]]></title>
    <url>%2F2018%2F08%2F25%2FGit%2F</url>
    <content type="text"><![CDATA[查看、添加、提交、删除、找回，重置修改文件git help # 显示command的helpgit show # 显示某次提交的内容 git show $idgit co – # 抛弃工作区修改git co . # 抛弃工作区修改git add # 将工作文件修改提交到本地暂存区git add . # 将所有修改过的工作文件提交暂存区git rm # 从版本库中删除文件git rm –cached # 从版本库中删除文件，但不删除文件git reset # 从暂存区恢复到工作文件git reset – . # 从暂存区恢复到工作文件git reset –hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改git ci git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做 git ci -am “some comments”git ci –amend # 修改最后一次提交记录git revert &lt;$id&gt; # 恢复某次提交的状态，恢复动作本身也创建次提交对象git revert HEAD # 恢复最后一次提交的状态 查看文件diffgit diff # 比较当前文件和暂存区文件差异 git diffgit diff # 比较两次提交之间的差异git diff .. # 在两个分支之间比较git diff –staged # 比较暂存区和版本库差异git diff –cached # 比较暂存区和版本库差异git diff –stat # 仅仅比较统计信息 查看提交记录git log git log # 查看该文件每次提交记录git log -p # 查看每次详细修改内容的diffgit log -p -2 # 查看最近两次详细修改内容的diffgit log –stat #查看提交统计信息tig Mac上可以使用tig代替diff和log，brew install tig Git 本地分支管理 查看、切换、创建和删除分支git br -r # 查看远程分支git br &lt;new_branch&gt; # 创建新的分支git br -v # 查看各个分支最后提交信息git br –merged # 查看已经被合并到当前分支的分支git br –no-merged # 查看尚未被合并到当前分支的分支git co # 切换到某个分支git co -b &lt;new_branch&gt; # 创建新的分支，并且切换过去git co -b &lt;new_branch&gt; # 基于branch创建新的new_branchgit co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除git co $id -b &lt;new_branch&gt; # 把某次历史提交记录checkout出来，创建成一个分支git br -d # 删除某个分支git br -D # 强制删除某个分支 (未被合并的分支被删除的时候需要强制) 分支合并和rebasegit merge # 将branch分支合并到当前分支git merge origin/master –no-ff # 不要Fast-Foward合并，这样可以生成merge提交git rebase master # 将master rebase到branch，相当于： git co &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge Git补丁管理(方便在多台机器上开发同步时用)git diff &gt; ../sync.patch # 生成补丁git apply ../sync.patch # 打补丁git apply –check ../sync.patch #测试补丁能否成功 Git暂存管理git stash # 暂存git stash list # 列所有stashgit stash apply # 恢复暂存的内容git stash drop # 删除暂存区 Git远程分支管理git pull # 抓取远程仓库所有分支更新并合并到本地git pull –no-ff # 抓取远程仓库所有分支更新并合并到本地，不要快进合并git fetch origin # 抓取远程仓库更新git merge origin/master # 将远程主分支合并到本地当前分支git co –track origin/branch # 跟踪某个远程分支创建相应的本地分支git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt; # 基于远程分支创建本地分支，功能同上git push # push所有分支git push origin master # 将本地主分支推到远程主分支git push -u origin master # 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)git push origin &lt;local_branch&gt; # 创建远程分支， origin是远程仓库名git push origin &lt;local_branch&gt;:&lt;remote_branch&gt; # 创建远程分支git push origin :&lt;remote_branch&gt; #先删除本地分支(git br -d )，然后再push删除远程分支 Git远程仓库管理GitHubgit remote -v # 查看远程服务器地址和仓库名称git remote show origin # 查看远程服务器仓库状态git remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址git remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm # 删除远程仓库 创建远程仓库git clone –bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库scp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git –bare init # 在服务器创建纯仓库git remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址git push -u origin master # 客户端首次提交git push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且trackgit remote set-head origin master # 设置远程仓库的HEAD指向master分支 ，也可以命令设置跟踪远程库和本地库git branch –set-upstream master origin/mastergit branch –set-upstream develop origin/develop refloggit reflog是对reflog进行管理的命令,reflog是git用来记录引用变化的一种机制,比如记录分支的变化或者是HEAD引用的变化.当git reflog不指定引用的时候,默认列出HEAD的reflog.HEAD@{0}代表HEAD当前的值,HEAD@{3}代表HEAD在3次变化之前的值.git会将变化记录到HEAD对应的reflog文件中,其路径为.git/logs/HEAD, 分支的reflog文件都放在.git/logs/refs目录下的子目录中. 特殊符号:^代表父提交,当一个提交有多个父提交时,可以通过在^后面跟上一个数字,表示第几个父提交: ^相当于^1.~相当于连续的个^.]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx的使用（一）----安装]]></title>
    <url>%2F2018%2F08%2F25%2Fnginx%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%80%EF%BC%89-%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[一、nginx简介1、nginx是什么Nginx (engine x) 是一个高性能的HTTP和反向代理服务，也是一个IMAP/POP3/SMTP服务。其特点是占有内存少，并发能力强，事实上nginx的并发能力确实在同类型的网页服务器中表现较好。 2、nginx可以用来做什么（不加载第三方模块） 反向代理 负载均衡 HTTP服务器（包含动静分离） 正向代理 缓存 二、nginx安装以及简单的配置1、安装nginx（环境 centos7）采取最简单的方法，yum install nginx -y 2、配置nginx① 修改user为root（你用来启动nginx的账户）② 添加转发服务器123456789101112131415161718192021222324252627upstream web_server&#123; # 名字随便起 server 127.0.0.1:8080 max_fails=1 fail_timeout=10s; #Tomcat服务器1 ip server 127.0.0.2:8080 max_fails=1 fail_timeout=10s; #Tomcat服务器2 ip #注意服务器的ip以及端口不要重复 ...&#125;server &#123; listen 80 default_server; listen [::]:80 default_server; server_name _; root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; proxy_pass http://web_server; #和上边定义的upstream 对应起来 proxy_connect_timeout 10; proxy_read_timeout 10; proxy_send_timeout 10; &#125; error_page 404 /404.html; location = /40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125;&#125; 3、nginx的启动、停止、重启1234systemctl start nginx #启动nginxsystemctl stop nginx #停止nginxsystemctl restart nginx #重新启动nginxsystemctl enable nginx #开机启动nginx 4、nginx踩过的一些坑selinux引起的权限访问受限问题，cat /var/log/Audit/Audit.log 发现有nginx访问阻止记录1type=AVC msg=audit(1416406823.013:3137): avc: denied &#123; search &#125; for pid=15488 comm="nginx" name="www" dev="dm-3" ino=146 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:user_home_dir_t:s0 tclass=dir 解决方案1、（建议采用）设置selinux允许nginx123yum install policycoreutils-pythoncat /var/log/audit/audit.log | grep nginx | grep denied | audit2allow -M mynginxsemodule -i mynginx.pp 解决方案2.1、临时关闭selinux1setenforce 0 #重启后失效 解决方案2.2、永久关闭selinux 打开 selinux 配置文件1vim /etc/selinux/config 修改 selinux 配置文件将SELINUX=enforcing改为SELINUX=disabled，保存后退出1234567891011# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=enforcing# SELINUXTYPE= can take one of three two values:# targeted - Targeted processes are protected,# minimum - Modification of targeted policy. Only selected processes are protected.# mls - Multi Level Security protection.SELINUXTYPE=targeted 重启电脑（一定重启，否则无效）]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[测试]]></title>
    <url>%2F2018%2F08%2F25%2Ffirst%2F</url>
    <content type="text"><![CDATA[测试文章 博客开通了 有事情请发送邮件]]></content>
      <categories>
        <category>test</category>
      </categories>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
</search>
